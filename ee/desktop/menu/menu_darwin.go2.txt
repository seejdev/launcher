//go:build darwin
// +build darwin

package menu

/*
#cgo darwin CFLAGS: -DDARWIN -x objective-c
#cgo darwin LDFLAGS: -framework Cocoa
#include "menu_darwin.h"
*/
import (
	"C"
)
import (
	"unsafe"

	"github.com/kolide/launcher/ee/desktop/assets"
)

func Init(hostname string) {
	vvv := assets.KolideDesktopIcon

	ptr := unsafe.Pointer(&vvv)
	C.createMenu(ptr, C.int(len(vvv)))

	/*onReady := func() {
		systray.SetTemplateIcon(assets.KolideDesktopIcon, assets.KolideDesktopIcon)
		systray.SetTooltip("Kolide")

		versionItem := systray.AddMenuItem(fmt.Sprintf("Version %s", version.Version().Version), "")
		versionItem.Disable()

		// if prod environment, return
		if hostname == "k2device-preprod.kolide.com" || hostname == "k2device.kolide.com" {
			return
		}

		// in non prod environment
		systray.SetTemplateIcon(assets.KolideDebugDesktopIcon, assets.KolideDebugDesktopIcon)
		systray.AddSeparator()
		systray.AddMenuItem("--- DEBUG ---", "").Disable()
		systray.AddMenuItem(fmt.Sprintf("Hostname: %s", hostname), "").Disable()
	}

	systray.Run(onReady, func() {})*/
}

func Shutdown() {
	//systray.Quit()
}
